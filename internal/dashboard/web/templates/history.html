{{define "history-content"}}
<div class="history-table-wrapper">
    <table class="history-table">
        <thead>
            <tr>
                <th>Symbol</th>
                <th>Entry Date</th>
                <th>Exit Date</th>
                <th>Hold Days</th>
                <th>Strikes</th>
                <th>Credit</th>
                <th>Final P&L</th>
                <th>P&L %</th>
                <th>Result</th>
            </tr>
        </thead>
        <tbody>
            {{range .}}
            <tr class="history-row {{if .IsProfit}}profit{{else}}loss{{end}}" 
                hx-get="/partials/position/{{.ID}}"
                hx-target="#position-detail-container"
                hx-swap="innerHTML"
                hx-on:htmx:after-swap="showPositionDetail()">
                <td>{{.Symbol}}</td>
                <td>{{.EntryDate.Format "01/02/06"}}</td>
                <td>{{if .ExitDate.IsZero}}--{{else}}{{.ExitDate.Format "01/02/06"}}{{end}}</td>
                <td>{{if .ExitDate.IsZero}}--{{else}}{{.HoldDays}}{{end}}</td>
                <td><span aria-label="Put strike: {{printf "%.0f" .PutStrike}}, Call strike: {{printf "%.0f" .CallStrike}}">{{printf "%.0f" .PutStrike}}/{{printf "%.0f" .CallStrike}}</span></td>
                <td>${{printf "%.2f" .CreditReceived}}</td>
                <td class="{{if .IsProfit}}positive{{else}}negative{{end}}">
                    ${{printf "%.2f" .CurrentPnL}}
                </td>
                <td class="{{if .IsProfit}}positive{{else}}negative{{end}}">
                    {{printf "%.1f" .PnLPercent}}%
                </td>
                <td>
                    <span class="result-badge {{if .IsProfit}}win{{else}}loss{{end}}">
                        {{if .IsProfit}}WIN{{else}}LOSS{{end}}
                    </span>
                </td>
            </tr>
            {{else}}
            <tr>
                <td colspan="9" class="no-data">No completed trades yet</td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>
{{end}}